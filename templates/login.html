<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Login - INPROLIB</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/cadastro_login.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/notifications.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/topbar.css') }}" />
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
</head>
<body>
  <header class="topbar">
    <div class="container">
      <div class="left">
        <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" height="28" />
        <!-- Removido texto duplicado INPROLIB para manter apenas a imagem -->
      </div>
      <button class="notif-btn" aria-label="Notificações">
        <span class="material-symbols-outlined">notifications</span>
      </button>
    </div>
  </header>

  <main class="login-wrapper">
    <!-- Lado esquerdo: card de login -->
    <section class="left-pane">
      {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
          <script>
            window.FLASH_MESSAGES = {{ messages|tojson|safe }};
          </script>
        {% endif %}
      {% endwith %}
      <div class="login-card" role="form">
        <h2 class="welcome">Bem-vindo!</h2>
        <!-- Mensagens flash antigas removidas; toasts padronizados via notifications.js -->
        <form id="loginForm" method="POST" action="/login" novalidate>
          <label for="cpf" class="label">CPF:</label>
          <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" inputmode="numeric" maxlength="14" class="input" autocomplete="username" />

          <label for="senha" class="label">Senha:</label>
          <input type="password" id="senha" name="senha" placeholder="Digite sua senha" class="input" autocomplete="current-password" />

          <div class="remember-line">
            <label class="remember"><input type="checkbox" id="rememberMe"> Lembrar-me</label>
          </div>

          <div class="actions">
            <button type="submit" class="btn-primary">Entrar</button>
          </div>

          <div class="links">
            <a href="#" id="openRegister">Cadastrar</a>
            <a href="/esqueci_senha">Esqueci minha senha</a>
          </div>
        </form>
      </div>
    </section>

    <!-- Lado direito: imagem e badge -->
    <section class="right-pane">
      <div class="brand-badge" aria-hidden="true"></div>
    </section>
  </main>

  <!-- Modal de Cadastro (um só, com barra de rolagem e campos empilhados) -->
  <div id="registerModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-labelledby="registerTitle">
    <div class="modal-content">
      <button type="button" class="modal-close" id="closeRegister" aria-label="Fechar">✕</button>
      <h3 id="registerTitle">Cadastro de Usuário</h3>
      <form id="registerForm" method="POST" action="/cadastro_alunos" novalidate>
        <input type="hidden" name="action" value="create" />
        <div class="modal-body">
          <label for="nome_user">Nome</label>
          <input type="text" id="nome_user" name="nome_user" placeholder="Insira o seu nome completo" required maxlength="255" />

          <label for="cpf_user">CPF</label>
          <input type="text" id="cpf_user" name="cpf_user" placeholder="000.000.000-00" inputmode="numeric" maxlength="14" pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" title="Formato: 000.000.000-00" />

          <label for="email_user">Email</label>
          <input type="email" id="email_user" name="email_user" placeholder="Insira o seu email" required autocomplete="email" />

          <label for="tipo_usuario">Tipo de Usuário</label>
          <select id="tipo_usuario" name="tipo_usuario" required>
            <option value="Aluno" selected>Aluno</option>
            <option value="Docente">Docente</option>
          </select>

          <label for="cep_user">CEP</label>
          <input type="text" id="cep_user" name="cep_user" placeholder="00000-000" inputmode="numeric" maxlength="9" autocomplete="postal-code" pattern="\d{5}-\d{3}" title="Formato: 00000-000" />

          <label for="logradouro">Rua (Logradouro)</label>
          <input type="text" id="logradouro" name="logradouro" placeholder="Ex.: Avenida Brasil, 1000" autocomplete="address-line1" />

          <label for="complemento">Complemento</label>
          <input type="text" id="complemento" name="complemento" placeholder="Ex.: Apto 202" autocomplete="address-line2" />

          <label for="bairro">Bairro</label>
          <input type="text" id="bairro" name="bairro" placeholder="Ex.: Centro" autocomplete="address-level3" />

          <label for="cidade">Cidade</label>
          <input type="text" id="cidade" name="cidade" placeholder="Ex.: São Paulo" autocomplete="address-level2" />

          <label for="estado">Estado</label>
          <input type="text" id="estado" name="estado" placeholder="UF" maxlength="2" style="text-transform:uppercase" autocomplete="address-level1" />

          <label for="senha_reg">Senha</label>
          <input type="password" id="senha_reg" name="senha" placeholder="Insira a sua senha" required minlength="8" autocomplete="new-password" />

          <label for="confirmar_senha">Confirmar senha</label>
          <input type="password" id="confirmar_senha" name="confirmar_senha" placeholder="Confirme a sua senha" required autocomplete="new-password" />

          <label for="captcha">Captcha: {{ captcha_question }}</label>
          <input type="text" id="captcha" name="captcha" placeholder="Digite o resultado" required inputmode="numeric" pattern="\d+" title="Digite apenas números" />
        </div>
        <div class="modal-actions">
          <button type="submit" class="btn-primary">Salvar</button>
          <button type="button" class="btn-secondary" id="btnCloseRegister">Fechar</button>
        </div>
      </form>
    </div>
  </div>

  <script src="{{ url_for('static', filename='javascript/notifications.js') }}"></script>
  <script>window.initFlashToasts && window.initFlashToasts();</script>
  <script src="{{ url_for('static', filename='javascript/login.js') }}"></script>
</body>
</html>